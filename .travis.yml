language: java
jdk:
  - openjdk11

dist: trusty

os:
  - linux
  - osx
  - windows

osx_image: xcode11.6

stages:
  - name: build
  - name: release
    if: branch IN (release) AND type = push

jobs:
  include:
    - stage: build
      script: ./gradlew clean build
    - stage: release
      script: ./gradlew publishToSonatype closeAndReleaseSonatypeStagingRepository -no-daemon --no-parallel
